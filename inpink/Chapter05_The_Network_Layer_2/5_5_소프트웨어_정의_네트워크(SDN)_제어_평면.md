> 목차

👉[5.5 소프트웨어 정의 네트워크(SDN) 제어 평면](#55-소프트웨어-정의-네트워크SDN-제어-평면)　   
　   [5.5.1 SDN 제어 평면](#551-SDN-제어-평면)　   　   
　   [5.5.2 OpenFlow 프로토콜](#552-OpenFlow-프로토콜)　   
  
　   
　   
 　   
## 5.5 소프트웨어 정의 네트워크(SDN) 제어 평면

SDN(software defined networking) : **네트워크를 데이터 평면, 제어 평면으로 구분하는 아키텍쳐** 　   
 　   
네트워크에서 데이터 평면은 **스위치들**로 구성된다. 이들은 **매치 플러스 액션**을 수행한다.  　   
제어 평면은 서버, 스위치들의 **플로우 테이블을 결정,관리하는 "소프트웨어"** 로 구성된다. 　   
 　   
5.1절에서 배운 것처럼, 데이터 평면은 하드웨어, 제어 평면은 소프트웨어적인 부분이다. 　   
 　   
> match plus action

각 라우터는 플로우 테이블을 가지고 있는데, 여기서 **목적지 IP 주소를 찾는 것을 Match**라고 한다. 　   
스위치의 **출력 포트로 전송시키는 것을 Action**이라고 한다. 　   
 　   
![image](https://github.com/inpink/CS_Networking_Study/assets/108166692/4ec4fe66-c584-4ad0-ba6a-dfbfd21efd76) 　   
 　   
=> SDN 컨트롤러는 데이터 평면의 장치들의 상태 정보를 유지하고, 이 정보를 제어 평면의 "네트워크 제어 애플리케이션"에 전달하는 역할을 한다. 　    
"네트워크 제어 애플리케이션"이 하부 네트워크 장치들을 모니터링하고, 제어할 수 있도록 수단을 제공한다. 　   
즉, "네트워크 제어 애플리케이션"을 통해 **네트워크를 프로그래밍**할 수 있다. 　   
 　   
=> SDN 컨트롤러는 "논리적으로" 단일 중앙 집중 형태이고, 일반적으로는 협업 능력, 확장성, 가용성 등을 고려하여 여러 개의 서버를 이용한다. 　   
 　   
 　   
 　   
![image](https://github.com/inpink/CS_Networking_Study/assets/108166692/d1e3cab8-9b74-4df8-b978-91b2ee1b3f3e) 　   
=> SDN 컨트롤러는 3개의 계층으로 구분할 수 있다.  　   
 　   
=> **통신 계층** : SDN 컨트롤러의 가장 하부에 있는 계층이다. 　   
OpenFlow와 같은 프로토콜을 통해 'SDN 컨트롤러'와 '제어되는 네트워크 장치' 간의 통신을 담당한다. 　   
이를 통해 'SDN 컨트롤러'는 장치를 제어하고, 장치는 관찰된 이벤트(링크 장애 등)를 'SDN 컨트롤러'에 전달한다.　 　   
 　   
=> **네트워크 전체 상태 관리 계층** : SDN로 제어되는 호스트, 링크, 스위치 등등의 장치 상태에 대한 최신 정보를 제공한다. 　   
(이 최신 정보를 제공해야, 전체적인 네트워크 내에 있는 다양한 제어 장치들의 플로우 테이블을 결정할 수 있다.) 　   
컨트롤러는 또한 다양한 제어 장치의 플로우 테이블 복사본을 유지 관리하기도 한다.　 　   
 　   
=> **네트워크 제어 애플리케이션 계층** : 'SDN 컨트롤러'는 '노스바운드 API(인터페이스)'를 통해 '네트워크 제어 애플리케이션(라우팅, 접속 제어, 로드 밸런서 등)'와 상호작용한다. 　 　   
이 계층을 통해 '네트워크 제어 애플리케이션'이 SDN의 다른 계층(통신, 전체 상태 관리)의 정보를 읽고 쓸 수 있게 한다. 　   
( 네트워크 상태 정보, 플로우 테이블 등)　 　   
 　   
 　   
 　   
### 5.5.2 OpenFlow 프로토콜

OpenFlow 프로토콜은 'SND 컨트롤러'의 '통신 계층'에서 사용되는 프로토콜로, 　   
SDN 컨트롤러와 장치(스위치, 라우터 등) 사이 데이터를 주고받는 통신을 위한 프로토콜(규약)이다.　    　   
 　   
1) **SDN 컨트롤러-> 장치(스위치 등)**   
1-1) 설정 : 이 메세지는 컨트롤러가 장치의 설정 파라미터를 문의하거나 설정할 수 있다.　   
1-2) 패킷 전송 : 컨트롤러가 장치의 특정 포트에 특정 패킷을 전송할 수 있다. 　   
1-3) 상태 수정, 1-4)상태 읽기 등 　   
 　   
2) **장치 -> 컨트롤러**　   
2-1) 플로우 제거 : 이 메세지는 장치가 컨트롤러에게 '어떤 플로우 테이블 엔트리가 시간이 만료되었음을 알리거나, 1) 중 "상태 수정" 메시지를 수신한 결과로 플로우 테이블이 삭제되었다고 알린다.　 　      
2-2) 패킷 전달 : 장치에 도착한 패킷 중, 플로우 테이블의 어떤 엔트리와도 일치하지 않는 패킷은, 처리를 위해 컨트롤러로 다시 전달된다. (4.4절 참고) 　   
2-3) 포트 상태 : 장치의 포트 상태가 변화한 경우, 이를 SDN 컨트롤러에 알린다. 　    　   
