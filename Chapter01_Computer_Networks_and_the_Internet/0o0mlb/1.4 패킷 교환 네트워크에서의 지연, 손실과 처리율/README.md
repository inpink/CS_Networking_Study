# 1.4 패킷 교환 네트워크에서의 지연, 손실과 처리율
현실에서는 두 종단 시스템 간에 전달될 수 있는 처리율을 제한하므로, **종단 시스템 간에 지연이 발생하며 패킷을 잃어버리기도 한다**

## 1.4.1 패킷 교환 네트워크에서의 지연 개요
패킷은 경로를 따라 한 노드에서 다음 노드로 전달되므로 각 노드에서 다양한 지연을 겪으며, 이들은 쌓여서 `전체 노드 지연`을 일으킨다

### 노드 처리 지연(nodal processing delay)
> 패킷 헤더를 조사하고 그 패킷을 어디로 보낼지를 결정하는 시간
- 업스트림 노드에서 발생하는 **패킷의 비트 레벨 오류**를 조사하는데 필요한 시간

### 큐잉 지연(queuing delay)
> 패킷이 큐에서 링크로 전송되기를 기다리는 시간
- 큐에 저장되어 링크로 전송되기를 기다리는 **다른 패킷의 수에 의해** 결정된다
- 이미 도착한 패킷의 수는 큐에 도착하는 트래픽의 강도와 특성에 대한 함수이다

### 전송 지연(transmission delay)
> 패킷의 모든 비트를 링크로 밀어내는 데 필요한 시간
- 패킷의 길이는 `L 비트`, 라우터에서 라우터까지 링크의 전송률은 `R bps`이라면, 전송 지연은 `L/R`이다

### 전파 지연(propagation delay)
> 링크의 처음부터 라우터까지의 전파에 필요한 시간
- 비트는 링크의 전파 속도로 전파되고, 전파 속도는 링크의 물리 매체에 따라 다르다
- 두 라우터 사이의 거리를 전파 속도로 나눈 것이다

### 전송 지연과 전파 지연 비교
전송 지연은 **라우터가 패킷을 내보내는 데 필요한 시간**으로, 패킷 길이와 링크 전송률의 함수이며 두 라우터 사이의 거리와는 관계없다

전파 지연은 **비트가 한 라우터에서 다음 라우터로 전파되는데 걸리는 시간**으로, 두 라우터 사이의 거리에 대한 함수이며 패킷 길이나 링크 전송률과는 관계없다

### 전체 노드 지연(total nodal delay)
전체 노드 지연 = 노드 처리 지연 + 큐잉 지연 + 전송 지연 + 전파 지연

---
## 1.4.2 큐잉 지연과 패킷 손실
다른 세 가지 지연과는 다르게, 큐잉 지연은 패킷마다 다를 수 있다

### 큐잉 지연을 결정하는 요소
- 트래필이 큐에 도착하는 비율
- 링크의 전송률
- 도착하는 트래픽의 특성

### 트래픽 강도
> 큐잉 지연의 정도를 측정하는데 매우 중요한 요소다
- 트래픽 강도가 0에 가까우면, 평균 큐잉 지연은 0에 가까워진다
- 트래픽 강도가 1에 가까우면, 평균 큐 길이는 점점 증가한다

### 패킷 손실
> **큐가 꽉 차서 패킷을 저장할 수 없는 경우**, 라우터는 그 패킷을 버린다(drop, lost)
- 종단 시스템 입장에서는 네트워크로부터 목적지에 나타나지 않는 것으로 보인다
- 손실된 패킷은 종단 간에 재전송될 수 있다

---
## 1.4.3 종단 간 지연
종단 간 지연 = N(처리 지연 + 전송 지연(L/R) + 전파 지연)

---
## 1.4.4 컴퓨터 네트워크에서의 처리율
- `종단 간 처리율(throughput)`은 컴퓨터 네트워크에서의 주요한 성능 수단이다
- 서버-클라이언트 처리율은 min{R1, R2, ... Rn} `병목 링크(bottleneck link)의 전송률`이다
- 처리율은 데이터가 흐르는 링크의 전송률에 의존할 뿐만 아니라 **간섭 트래픽**에도 의존한다
