# 3.1 트랜스포트 계층 서비스 및 개요
트랜스포트 계층 프로토콜은 각기 다른 호스트에서 동작하는 애플리케이션 프로세스 간의 `논리적 통신(logical communication)`을 제공한다

`논리적 통신`은 애플리케이션의 관점에서 보면 프로세스들이 동작하는 호스트들이 직접 연결된 것처럼 보인다는 것을 의미한다

트랜스포트 계층 프로토콜은 네트워크 라우터가 아닌 `종단 시스템`에서 구현된다

송신 측의 트랜스포트 계층은 송신 애플리케이션 프로세스로부터 수신한 메시지를 인터넷 용어로는 `트랜스포트 계층 세그먼트(segment)`라고 알려진 트랜스포트 계층 패킷으로 변환한다
- 애플리케이션 메시지를 트랜스포트 계층 세그먼트로 만들기 위해 **작은 조각으로 분할**
- 각각의 조각에 트랜스포트 계층 **헤더를 추가**
- 트랜스포트 계층은 송신 종단 시스템에 있는 **네트워크 계층으로 세그먼트를 전달**
- 세그먼트가 네트워크 계층 `패킷(datagram)` 안에 **캡슐화**되어 목적지로 전달

수신 측에서 네트워크 계층은 `데이터그램`으로부터 트랜스포트 계층 세그먼트를 추출하고 트랜스포트 계층으로 세그먼트를 보낸다.
이후, 트랜스포트 계층은 수신 애플리케이션에서 세그먼트 내부의 데이터를 이용할 수 있도록 수신된 `세그먼트`를 처리한다

## 3.1.1 트랜스포트 계층과 네트워크 계층 사이의 관계
트랜스포트 계층 프로토콜은 각기 다른 호스트에서 동작하는 **프로세스들** 사이의 논리적 통신을 제공하지만, 네트워크 계층 프로토콜은 **호스트들** 사이의 논리적 통신을 제공한다

트랜스포트 계층 프로토콜은 종단 시스템에 존재한다.

또한, 트랜스포트 계층이 제공할 수 있는 서비스는 하위 네트워크 계층 프로토콜의 서비스 모델에 의해 제약받는다. 

그럼에도 불구하고, 특정 서비스는 트랜트포트 프로토콜에 의해 제공될 수 있다

---
## 3.1.2 인터넷 트랜스포트 계층의 개요
애플리케이션 개발자는 소켓을 생성할 때 TCP와 UDP 중에서 하나를 선택해야 한다
1. 비신뢰적이고 비연결형 서비스를 요청한 애플리케이션에게 제공하는 `UDP(User Datagram Protocol)`
2. 신뢰적이고 연결지향형 서비스를 요청한 애플리케이션에게 제공하는 `TCP(Transmission Control Protocol)`

인터넷에서 트랜스포트 계층 패킷을 `**세그먼트**`라고 지칭하며 네트워크 계층 패킷에 대해서는 `데이터그램`라는 용어를 사용한다

인터넷의 네트워크 계층 프로토콜은 `인터넷 프로토콜(Internet Protocol, IP)`라는 이름을 갖는다
- 호스트들 간에 논리적 통신을 제공하는 **최선형 전달 서비스**다
- IP가 세그먼트를 전달하기 위해 최대한 노력하지만, **어떤 보장도 하지 않는다**는 것을 의미한다
- IP는 세그먼트의 전달을 보장하지 않고, 세그먼트가 순서대로 전달되는 것을 보장하지 않는다
- IP는 세그먼트 내부 데이터의 무결성(integrity)을 보장하지 않는다
- **비신뢰적 서비스(unreliable service)**라고 부른다
- 각 호스트는 **적어도 하나의 IP 주소를 갖고 있다**

UDP와 TCP이 제공하는 기능은 다음과 같다.
1. `호스트 대 호스트 전달`을 `프로세스 대 프로세스 전달`로 확장하는 것을 **트랜스포트 계층 다중화(multiplexing)**와 **역다중화(demultiplexing)**라고 부른다
2. 헤더에 오류 검출 필드를 포함함으로써 무결성 검사를 제공한다

TCP는 몇 가지 추가적인 서비스를 제공한다.
1. **신뢰적인 데이터 전송**을 제공한다. 흐름제어, 순서 번호, 확인 응답, 타이머를 사용함으로써 데이터가 순서대로 정확하게 전달되도록 확실하게 한다
2. **혼잡 제어**를 사용한다. TCP 연결이 과도한 양의 트래픽으로 모든 통신하는 호스트들 사이의 스위치와 링크를 혼잡하게 하는 것을 방지하는 것이다.
3. 혼잡한 네트워크 링크에서 각 TCP가 네트워크에 보낼 수 있는 **트래픽을 조절**함으로써 수행된다
