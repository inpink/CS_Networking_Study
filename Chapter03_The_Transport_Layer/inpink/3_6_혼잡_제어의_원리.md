> 목차

👉[3.6 혼잡 제어의 원리](#36-혼잡-제어의-원리)　   
  
　   
　   
## 3.6 혼잡 제어의 원리

호스트A와 B가 라우터와 링크를 공유한다고 해보자. 용량 R까지 받아들일 수 있는 네트워크다.　   
이 때, 한 쪽에서 받아들일 수 있는 용량은 R/2이다. 　   
![image](https://github.com/inpink/CS_Networking_Study/assets/108166692/00e641d9-285f-4626-8762-9ffd3bdd30f7)
![image](https://github.com/inpink/CS_Networking_Study/assets/108166692/5d5f0af5-6ae2-4d3a-b3ea-4883f82c925d)
최대 용량(R/2)에 근접할수록, **평균 지연**은 급격하게 커진다. 　   
R/2를 넘는순간, 평균 지연은 거의 무한에 가까워진다. 　   
=> 네트워크가 혼잡하지 않도록 제어하는 것이 꼭 필요하다.　   
　   
　   
> 혼잡 제어에 대한 접근법 2가지

1) 종단 간의 혼잡 제어　   
2) 네트워크 지원 혼잡 제어　   
　   
　   
> 1) 종단 간의 혼잡 제어

네트워크 계층(IP,3)은 혼잡 제어를 위해 전송계층(4)에 아무런 정보를 제공해주지 않는다.　   
이 때, **종단 시스템**에서 전송 계층(4)은 **관찰된 네트워크 동작(패킷 손실 및 지연 등)** 을 통해 혼잡 상태를 추측해야 한다.　   
(전송 계층4은 종단 시스템에서 작동한다고 배웠음)　   
　   
예를 들어 TCP는 세그먼트 손실을 네트워크 혼잡이라고 간주하고, 그에 따라 **윈도 크기**를 줄였다.　   
RTT(왕복 시간)를 사용할 수도 있다.　   
　   
　   
> 2) 네트워크 지원 혼잡 제어

이 방법에서는, **라우터**가 네트워크의 혼잡 상태를 **송신자, 수신자 모두**에게 "직접적인 피드백"을 전송해준다. 　   
예를 들어, ATM ABR(Available Bite Rate) 혼잡 제어는 **제공할 수 있는 전송률을 송신자에게** 직접적으로 알린다.　   
　   
=> 예전에는 TCP와 IP에서 1)번 방식을 사용했으나, 최근에는 TCP와 IP가 혼잡 제어를 선택적으로 **구현**할 수도 있다.　   
　   
　   
> 239p 그림 3.49

2)번을 구현하는 2가지 방법을 나타내고 있다.　   
　   
ⓐ 직접 피드백　   
"초크 패킷"등을 이용한다.　   
라우터에서 송신자, 수신자와 "직접" 정보가 흐른다.　   
　   
ⓑ 수신자 호스트를 경유　   
송신자 -> 수신자 패킷 보냄　   
만약 혼잡이면, 수신자 -> 송신자 패킷에서 "혼잡"을 알림　   
=> 수신자가 송신자에게 패킷을 보내는 경우에 사용 가능. 어차피 수신자는 송신자에게 ACK 등을 보낼 것이기 때문.　   
=> 송신자 -> 라우터 -> 수신자의 "완전한 왕복 시간"이 소요됨　   
